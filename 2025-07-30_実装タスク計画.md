# 農業AIエージェント実装タスク計画書 (2025-07-30)

## 1. プロジェクト概要

ドキュメント群から、本プロジェクトはLangGraph、MongoDBハイブリッド検索、LINEプラットフォームを活用した自律型マルチエージェントシステムを構築し、農業分野における課題解決を目指すものと理解しました。Manusのアーキテクチャを参考に、タスクの自動分解、実行、自己評価を行う高度なAIエージェントを開発します。

## 2. 実装フェーズとタスク一覧

### フェーズ1: 基盤構築と環境設定 (1-2週間)

-   [ ] **環境構築:**
    -   [ ] Pythonプロジェクト初期化 (`pyproject.toml` または `requirements.txt`)
    -   [ ] 必要なライブラリのインストール (`langchain`, `langgraph`, `pymongo`, `fastapi`, `uvicorn`, `line-bot-sdk`等)
    -   [ ] `.env`ファイル設定 (APIキー、DB接続情報)
    -   [ ] Docker環境のセットアップ (`Dockerfile`, `docker-compose.yml`)
-   [ ] **データベース設定:**
    -   [ ] MongoDB Atlasクラスタのセットアップ
    -   [ ] データベースとコレクションの設計・作成
    -   [ ] ベクトル検索用インデックスの設定

### フェーズ2: コアエージェントシステムの開発 (3-4週間)

-   [ ] **LangGraphの基本構造設計:**
    -   [ ] Supervisor（監督者）エージェントの定義
    -   [ ] 各種専門家エージェント（タスク分解、情報検索、実行、評価）の役割定義
    -   [ ] エージェント間の連携フロー（グラフ）の設計
-   [ ] **情報検索エージェントの実装:**
    -   [ ] MongoDBハイブリッド検索（ベクトル検索 + テキスト検索）を行うツールの開発
    -   [ ] Web検索ツール、ドキュメント検索ツールの統合
-   [ ] **タスク実行エージェントの実装:**
    -   [ ] タスク分解エージェントの開発
    -   [ ] 分解されたサブタスクを実行するロジックの実装
    -   [ ] 実行結果を管理・記録する仕組みの構築
-   [ ] **自己評価・改善ループの実装:**
    -   [ ] 実行結果を評価するCritique（評価者）エージェントの開発
    -   [ ] 評価に基づき、次のアクションを決定するロジックの組み込み

### フェーズ3: 農業ドメイン特化機能の実装 (2-3週間)

-   [ ] **農業用ツールの開発・統合:**
    -   [ ] 外部API（天候情報、市場価格など）連携ツールの開発
    -   [ ] センサーデータ（土壌水分、温度など）を取得・解釈するツールの開発
    -   [ ] 農業知識データベースとの連携
-   [ ] **農業特化シナリオの実装:**
    -   [ ] 「病害虫の特定と対策提案」シナリオの実装
    -   [ ] 「最適な水やり計画の立案」シナリオの実装
    -   [ ] 「収穫時期の予測」シナリオの実装

### フェーズ4: LINEインターフェースの統合 (2週間)

-   [ ] **バックエンドAPIの開発:**
    -   [ ] FastAPI等を用いたLINE Webhook受信用APIエンドポイントの作成
    -   [ ] ユーザーからのメッセージをLangGraphエージェントに渡す処理の実装
-   [ ] **LINEリッチメニュー/UIの実装:**
    -   [ ] ユーザーが操作しやすいリッチメニューの設計・実装
    -   [ ] 対話形式での情報提供（テキスト、画像、カルーセル等）の実装
-   [ ] **状態管理:**
    -   [ ] ユーザーごとの対話状態をMongoDBに保存・管理する仕組み

### フェーズ5: テスト、デプロイ、運用 (1-2週間)

-   [ ] **テスト:**
    -   [ ] ユニットテスト、結合テストの作成
    -   [ ] シナリオに基づいたE2Eテストの実施
-   [ ] **デプロイ:**
    -   [ ] クラウドプラットフォーム（GCP, AWS, Azure等）へのデプロイ
    -   [ ] CI/CDパイプラインの構築
-   [ ] **監視・運用:**
    -   [ ] ログ収集・監視システムの導入 (Logging, Monitoring)
    -   [ ] 定期的なメンテナンス計画の策定

## 3. 次のステップ

まずは**フェーズ1: 基盤構築と環境設定**から着手することを推奨します。
`pyproject.toml`の作成と、主要ライブラリのインストールから始めましょう。
